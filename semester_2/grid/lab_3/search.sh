#!/bin/bash

# Зчитування параметрів з командного рядка
program="$1"
b_max="$2"
b_step="$3"

b=0.0  # Початкове значення коефіцієнта тертя

while (( $(echo "$b <= $b_max" | bc -l) )); do
    echo "Перевірка для b = $b"
    # Викликаємо програму з поточним значенням b
    output=$("$program" "$b")
    echo "$output"
    # Якщо вивід містить рядок "Система зупинилась.", то завершуємо цикл
    if echo "$output" | grep -q "Система зупинилась."; then
        echo "Система зупинилась при b = $b"
        exit 0
    fi
    # Збільшуємо значення b на заданий крок
    b=$(echo "$b + $b_step" | bc -l)
done

echo "Система не зупинилась до b = $b_max"
exit 1
